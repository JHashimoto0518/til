---
bibliography: 
repositoryUrl:
draft: false
---

# ステップスケーリングの属性を取得するには

![alt text](images/step-scaling.png)

```bash
aws application-autoscaling describe-scaling-policies --service-namespace ecs
# {
#     "ScalingPolicies": [
#         {
#             ...
#             "ScalableDimension": "ecs:service:DesiredCount",
#             "PolicyType": "StepScaling",
#             "StepScalingPolicyConfiguration": {
#                 "AdjustmentType": "ChangeInCapacity",
#                 "StepAdjustments": [
#                     {
#                         "MetricIntervalLowerBound": 0.0,
#                         "MetricIntervalUpperBound": 10.0,
#                         "ScalingAdjustment": 1
#                     },
#                     {
#                         "MetricIntervalLowerBound": 10.0,
#                         "ScalingAdjustment": 2
#                     }
#                 ],
#                 "MetricAggregationType": "Average"
#             },
#             "Alarms": [
#                 {
#                     "AlarmName": "TargetTracking-service/MinimalEcsStack-MinimalClusterBA8B60ED-L7aE374vHPtl/MinimalEcsStack-ServiceD69D759B-l93YxuMlHQJS-AlarmHigh-946915b2-9722-4c48-8dd4-d0dad01c1628",
#                     "AlarmARN": "arn:aws:cloudwatch:ap-northeast-1:533267060632:alarm:TargetTracking-service/MinimalEcsStack-MinimalClusterBA8B60ED-L7aE374vHPtl/MinimalEcsStack-ServiceD69D759B-l93YxuMlHQJS-AlarmHigh-946915b2-9722-4c48-8dd4-d0dad01c1628"
#                 }
#             ],
#             ...
#         },
```

しきい値の `80` はスケーリングポリシーでは保持されていないため、アラームから取得する必要がある。

`90` は `MetricIntervalUpperBound`、`MetricIntervalLowerBound`およびしきい値から算出する。
